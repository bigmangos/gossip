<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>qianxi0410&#x27;s website</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/0255bde28303de04.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0255bde28303de04.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-5752944655d749a0.js" defer=""></script><script src="/_next/static/chunks/framework-2ea954a4e58c9061.js" defer=""></script><script src="/_next/static/chunks/main-ce0b68d8c15f7c22.js" defer=""></script><script src="/_next/static/chunks/pages/_app-be6b838f3ca9979e.js" defer=""></script><script src="/_next/static/chunks/519-55aa84e2cbd8742d.js" defer=""></script><script src="/_next/static/chunks/251-5029694f53f8fa0d.js" defer=""></script><script src="/_next/static/chunks/967-8368cdc9c31c3da4.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bid%5D-857bfbb554605634.js" defer=""></script><script src="/_next/static/vE0Ub5k0xjIICqzA76nxZ/_buildManifest.js" defer=""></script><script src="/_next/static/vE0Ub5k0xjIICqzA76nxZ/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="w-full sm:w-10/12 md:w-9/12 lg:w-7/12 container"><div class="my-10 sm:my-20"><div class="flex flex-col items-start mb-10"><div class="text-2xl sm:text-4xl font-bold">Two Sum </div><div class="sm:text-lg text-sm"><span>qianxi0410</span> / <span>2022年4月19日</span> / <span>2022年7月19日</span></div></div><div class="font-normal"><h3 level="3" node="[object Object]" class="sm:text-xl text-lg font-bold my-3">Two Sum</h3>
<p node="[object Object]" class="sm:text-xl text-lg my-4">如果你没听过这个题，那么你一定是一个不合格的程序员。 <del node="[object Object]" class="text-red-500">断言丁真，鉴定为真</del></p>
<p node="[object Object]" class="sm:text-xl text-lg my-4">作为 <code class="bg-green-100" node="[object Object]">L站</code> 的第一题，相信大部分人是听过/写过的，即便你第一遍没写出来 <del node="[object Object]" class="text-red-500">我就没写出来</del>，看了官方的解答之后也能够很快明白其原理。</p>
<p node="[object Object]" class="sm:text-xl text-lg my-4">官方解答中的两种做法，一个是时间换空间，即开个双循环遍历，另外一种则是空间换时间，即开个map记录。</p>
<p node="[object Object]" class="sm:text-xl text-lg my-4">这两种思路都比较 naive，但是如果要用 <code class="bg-green-100" node="[object Object]">TypeScript</code> 中的类型体操来完成测试又该如何呢？</p>
<p node="[object Object]" class="sm:text-xl text-lg my-4">首先，开个map记录下标这种做法，我尝试过很久（指几十分钟），被我认定为不可行。 <del node="[object Object]" class="text-red-500">也可能是我太菜了</del></p>
<p node="[object Object]" class="sm:text-xl text-lg my-4">那么就决定是你了！循环遍历！</p>
<p node="[object Object]" class="sm:text-xl text-lg my-4">首先，需要定义好需要完成的类型：</p>
<pre><div node="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:FiraCode Nerd Font; monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;font-size:1rem"><code class="language-typescript" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">1</span><span class="token" style="color:#8be9fd">type</span><span> </span><span class="token maybe-class-name" style="color:#f1fa8c">TwoSum</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token maybe-class-name" style="color:#f1fa8c">Arr</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#8be9fd">extends</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#50fa7b">number</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span class="token" style="color:#f1fa8c"> target </span><span class="token" style="color:#8be9fd">extends</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#50fa7b">number</span><span class="token" style="color:#f8f8f2">&gt;</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#50fa7b">any</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<p node="[object Object]" class="sm:text-xl text-lg my-4">和 <code class="bg-green-100" node="[object Object]">L站</code> 上的定义相仿，接受一个数组（元组）和一个目标值参数，并且返回一个元组。当然，在泛型当中，参数自然也是泛型参数。</p>
<p node="[object Object]" class="sm:text-xl text-lg my-4">不借助 <strong node="[object Object]" class="font-bold">外力</strong> 的话，显然这个类型无法达到所需要的体操效果。你必须考虑的是，如何循环遍历这第一个参数呢？</p>
<blockquote node="[object Object]" class="border-l-4 border-gray-300 bg-green-50 py-1 px-10">
<p node="[object Object]" class="sm:text-xl text-lg my-4">需要注意的是，在ts中，循环是通过递归调用来实现的，因为类型是不可变的，自然需要比较函数式的做法，即递归。</p>
</blockquote>
<p node="[object Object]" class="sm:text-xl text-lg my-4">为了不破坏调用的方式，你可以定义一个辅助类型，但是我这里选择的是默认参数类型，即：</p>
<pre><div node="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:FiraCode Nerd Font; monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;font-size:1rem"><code class="language-typescript" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">1</span><span class="token" style="color:#8be9fd">type</span><span> </span><span class="token maybe-class-name" style="color:#f1fa8c">TwoSum</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token" style="color:#f1fa8c">
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">2</span><span class="token" style="color:#f1fa8c">  </span><span class="token maybe-class-name" style="color:#f1fa8c">Arr</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#8be9fd">extends</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#50fa7b">number</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span class="token" style="color:#f1fa8c">
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">3</span><span class="token" style="color:#f1fa8c">  target </span><span class="token" style="color:#8be9fd">extends</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#50fa7b">number</span><span class="token" style="color:#f8f8f2">,</span><span class="token" style="color:#f1fa8c">
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">4</span><span class="token" style="color:#f1fa8c">  </span><span class="token" style="color:#ff79c6">I</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#8be9fd">extends</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#50fa7b">number</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#f8f8f2">=</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#bd93f9">0</span><span class="token" style="color:#f8f8f2">,</span><span class="token" style="color:#f1fa8c">
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">5</span><span class="token" style="color:#f1fa8c">  </span><span class="token" style="color:#ff79c6">J</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#8be9fd">extends</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#50fa7b">number</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#f8f8f2">=</span><span class="token" style="color:#f1fa8c"> </span><span class="token maybe-class-name" style="color:#f1fa8c">Add</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token" style="color:#ff79c6">I</span><span class="token" style="color:#f8f8f2">,</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#bd93f9">1</span><span class="token" style="color:#f8f8f2">&gt;</span><span class="token" style="color:#f8f8f2">,</span><span class="token" style="color:#f1fa8c">
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">6</span><span class="token" style="color:#f1fa8c">  </span><span class="token maybe-class-name" style="color:#f1fa8c">ArrLen</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#8be9fd">extends</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#50fa7b">number</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#f8f8f2">=</span><span class="token" style="color:#f1fa8c"> </span><span class="token maybe-class-name" style="color:#f1fa8c">Length</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token maybe-class-name" style="color:#f1fa8c">Arr</span><span class="token" style="color:#f8f8f2">&gt;</span><span class="token" style="color:#f8f8f2">,</span><span class="token" style="color:#f1fa8c">
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">7</span><span class="token" style="color:#f1fa8c"></span><span class="token" style="color:#f8f8f2">&gt;</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#50fa7b">any</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<p node="[object Object]" class="sm:text-xl text-lg my-4">和常规的做法类似，双循环，自然是需要两个变量： <code class="bg-green-100" node="[object Object]">i, j</code>，还有一个变量是用来记录传入元组的长度，当然，它是可选的。</p>
<p node="[object Object]" class="sm:text-xl text-lg my-4">注意到，<code class="bg-green-100" node="[object Object]">i,j</code>的初始值分别是0和 <code class="bg-green-100" node="[object Object]">Add&lt;I, 1&gt;</code> ，即0和1，这类似于 <code class="bg-green-100" node="[object Object]">for </code> 循环中的双重循环的初始化方式。</p>
<p node="[object Object]" class="sm:text-xl text-lg my-4">在进行下一步之前，需要将辅助类型 <code class="bg-green-100" node="[object Object]">Add</code> 和 <code class="bg-green-100" node="[object Object]">Length</code> 进行实现。</p>
<p node="[object Object]" class="sm:text-xl text-lg my-4">首先是 <code class="bg-green-100" node="[object Object]">Length</code>，需要知道的是，数组/元组有一个叫做 <code class="bg-green-100" node="[object Object]">length</code> 的属性，上面直接记录了该数组/元组的长度，所以 <code class="bg-green-100" node="[object Object]">Length</code> 的实现直接返回该属性值即可：</p>
<pre><div node="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:FiraCode Nerd Font; monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;font-size:1rem"><code class="language-typescript" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">1</span><span class="token" style="color:#8be9fd">type</span><span> </span><span class="token maybe-class-name" style="color:#f1fa8c">Length</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token" style="color:#ff79c6">T</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#8be9fd">extends</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#50fa7b">unknown</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">&gt;</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#ff79c6">T</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#50fa7b">&#x27;length&#x27;</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<p node="[object Object]" class="sm:text-xl text-lg my-4">其次是 <code class="bg-green-100" node="[object Object]">Add</code>，实现 <code class="bg-green-100" node="[object Object]">Add</code> 有很复杂的做法，但是这里只需要理解其思路，就实现一个比较 naive 的 <code class="bg-green-100" node="[object Object]">Add</code> 即可，思路是：造 <code class="bg-green-100" node="[object Object]">A、B</code> 两个长度的元组，并且返回两个元组合并后的长度，即 <code class="bg-green-100" node="[object Object]">A + B</code> 的值。</p>
<pre><div node="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:FiraCode Nerd Font; monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;font-size:1rem"><code class="language-typescript" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">1</span><span class="token" style="color:#8be9fd">type</span><span> </span><span class="token maybe-class-name" style="color:#f1fa8c">Push</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token" style="color:#ff79c6">T</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#8be9fd">extends</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#50fa7b">unknown</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span class="token" style="color:#f1fa8c"> </span><span class="token maybe-class-name" style="color:#f1fa8c">Val</span><span class="token" style="color:#f8f8f2">&gt;</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f8f8f2">[</span><span class="token spread" style="color:#f8f8f2">...</span><span class="token" style="color:#ff79c6">T</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token maybe-class-name">Val</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">2</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">3</span><span></span><span class="token" style="color:#8be9fd">type</span><span> </span><span class="token maybe-class-name" style="color:#f1fa8c">NTuple</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token" style="color:#ff79c6">N</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#8be9fd">extends</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#50fa7b">number</span><span class="token" style="color:#f8f8f2">,</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#ff79c6">T</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#8be9fd">extends</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#50fa7b">unknown</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#f8f8f2">=</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">&gt;</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#ff79c6">T</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#50fa7b">&#x27;length&#x27;</span><span class="token" style="color:#f8f8f2">]</span><span> </span><span class="token" style="color:#8be9fd">extends</span><span> </span><span class="token" style="color:#ff79c6">N</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">4</span><span>  </span><span class="token" style="color:#f8f8f2">?</span><span> </span><span class="token" style="color:#ff79c6">T</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">5</span><span>  </span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token maybe-class-name">NTuple</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token" style="color:#ff79c6">N</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token maybe-class-name">Push</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token" style="color:#ff79c6">T</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#50fa7b">unknown</span><span class="token" style="color:#f8f8f2">&gt;&gt;</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">6</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">7</span><span></span><span class="token" style="color:#8be9fd">type</span><span> </span><span class="token maybe-class-name" style="color:#f1fa8c">Add</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token" style="color:#ff79c6">A</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#8be9fd">extends</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#50fa7b">number</span><span class="token" style="color:#f8f8f2">,</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#ff79c6">B</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#8be9fd">extends</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#50fa7b">number</span><span class="token" style="color:#f8f8f2">&gt;</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token maybe-class-name">Length</span><span class="token" style="color:#f8f8f2">&lt;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">8</span><span>  </span><span class="token" style="color:#f8f8f2">[</span><span class="token spread" style="color:#f8f8f2">...</span><span class="token maybe-class-name">NTuple</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token" style="color:#ff79c6">A</span><span class="token" style="color:#f8f8f2">&gt;</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token spread" style="color:#f8f8f2">...</span><span class="token maybe-class-name">NTuple</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token" style="color:#ff79c6">B</span><span class="token" style="color:#f8f8f2">&gt;</span><span class="token" style="color:#f8f8f2">]</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">9</span><span></span><span class="token" style="color:#f8f8f2">&gt;</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<p node="[object Object]" class="sm:text-xl text-lg my-4">当然，在写的过程中，你还需要一个辅助类型，用来提取出 <code class="bg-green-100" node="[object Object]">number</code> 类型：</p>
<pre><div node="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:FiraCode Nerd Font; monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;font-size:1rem"><code class="language-typescript" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">1</span><span class="token" style="color:#8be9fd">type</span><span> </span><span class="token maybe-class-name" style="color:#f1fa8c">Num</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token" style="color:#ff79c6">T</span><span class="token" style="color:#f8f8f2">&gt;</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token maybe-class-name">Extract</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token" style="color:#ff79c6">T</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#50fa7b">number</span><span class="token" style="color:#f8f8f2">&gt;</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<p node="[object Object]" class="sm:text-xl text-lg my-4">上述的辅助工作做完之后，可以开始写真正的逻辑：</p>
<pre><div node="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:FiraCode Nerd Font; monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;font-size:1rem"><code class="language-typescript" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">1</span><span class="token" style="color:#8be9fd">type</span><span> </span><span class="token maybe-class-name" style="color:#f1fa8c">TwoSum</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token" style="color:#f1fa8c">
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">2</span><span class="token" style="color:#f1fa8c">  </span><span class="token maybe-class-name" style="color:#f1fa8c">Arr</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#8be9fd">extends</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#50fa7b">number</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span class="token" style="color:#f1fa8c">
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">3</span><span class="token" style="color:#f1fa8c">  target </span><span class="token" style="color:#8be9fd">extends</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#50fa7b">number</span><span class="token" style="color:#f8f8f2">,</span><span class="token" style="color:#f1fa8c">
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">4</span><span class="token" style="color:#f1fa8c">  </span><span class="token" style="color:#ff79c6">I</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#8be9fd">extends</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#50fa7b">number</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#f8f8f2">=</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#bd93f9">0</span><span class="token" style="color:#f8f8f2">,</span><span class="token" style="color:#f1fa8c">
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">5</span><span class="token" style="color:#f1fa8c">  </span><span class="token" style="color:#ff79c6">J</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#8be9fd">extends</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#50fa7b">number</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#f8f8f2">=</span><span class="token" style="color:#f1fa8c"> </span><span class="token maybe-class-name" style="color:#f1fa8c">Num</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token maybe-class-name" style="color:#f1fa8c">Add</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token" style="color:#ff79c6">I</span><span class="token" style="color:#f8f8f2">,</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#bd93f9">1</span><span class="token" style="color:#f8f8f2">&gt;&gt;</span><span class="token" style="color:#f8f8f2">,</span><span class="token" style="color:#f1fa8c">
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">6</span><span class="token" style="color:#f1fa8c">  </span><span class="token maybe-class-name" style="color:#f1fa8c">ArrLen</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#8be9fd">extends</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#50fa7b">number</span><span class="token" style="color:#f1fa8c"> </span><span class="token" style="color:#f8f8f2">=</span><span class="token" style="color:#f1fa8c"> </span><span class="token maybe-class-name" style="color:#f1fa8c">Length</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token maybe-class-name" style="color:#f1fa8c">Arr</span><span class="token" style="color:#f8f8f2">&gt;</span><span class="token" style="color:#f8f8f2">,</span><span class="token" style="color:#f1fa8c">
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">7</span><span class="token" style="color:#f1fa8c"></span><span class="token" style="color:#f8f8f2">&gt;</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#ff79c6">I</span><span> </span><span class="token" style="color:#8be9fd">extends</span><span> </span><span class="token maybe-class-name" style="color:#f1fa8c">ArrLen</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">8</span><span>  </span><span class="token" style="color:#f8f8f2">?</span><span> </span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f8f8f2">]</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">9</span><span>  </span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#ff79c6">J</span><span> </span><span class="token" style="color:#8be9fd">extends</span><span> </span><span class="token maybe-class-name" style="color:#f1fa8c">ArrLen</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">10</span><span>  </span><span class="token" style="color:#f8f8f2">?</span><span> </span><span class="token maybe-class-name">TwoSum</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token maybe-class-name">Arr</span><span class="token" style="color:#f8f8f2">,</span><span> target</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token maybe-class-name">Num</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token maybe-class-name">Add</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token" style="color:#ff79c6">I</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">1</span><span class="token" style="color:#f8f8f2">&gt;&gt;&gt;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">11</span><span>  </span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token maybe-class-name">Add</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token maybe-class-name">Arr</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#ff79c6">I</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token maybe-class-name">Arr</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#ff79c6">J</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">&gt;</span><span> </span><span class="token" style="color:#8be9fd">extends</span><span> </span><span class="token" style="color:#f1fa8c">target</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">12</span><span>  </span><span class="token" style="color:#f8f8f2">?</span><span> </span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#ff79c6">I</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#ff79c6">J</span><span class="token" style="color:#f8f8f2">]</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">13</span><span>  </span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token maybe-class-name">TwoSum</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token maybe-class-name">Arr</span><span class="token" style="color:#f8f8f2">,</span><span> target</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#ff79c6">I</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token maybe-class-name">Num</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token maybe-class-name">Add</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token" style="color:#ff79c6">J</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">1</span><span class="token" style="color:#f8f8f2">&gt;&gt;&gt;</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<p node="[object Object]" class="sm:text-xl text-lg my-4">令人恶心的三元表达式，不过分析起来也不算复杂：</p>
<ol depth="0" node="[object Object]" class="sm:text-xl text-lg list-decimal pl-5">
<li index="0" node="[object Object]" class="sm:text-xl text-lg my-2">判断 <code class="bg-green-100" node="[object Object]">I</code> 是否已经到达末尾，是则返回空元组，没有则2.</li>
<li index="1" node="[object Object]" class="sm:text-xl text-lg my-2">判断 <code class="bg-green-100" node="[object Object]">J</code>是否到达末尾，是则开始 <code class="bg-green-100" node="[object Object]">I + 1</code>次外循环，没有则3.</li>
<li index="2" node="[object Object]" class="sm:text-xl text-lg my-2">既然 <code class="bg-green-100" node="[object Object]">I,J</code> 都合法，则判断 <code class="bg-green-100" node="[object Object]">Arr[I] + Arr[J]</code> 是否为目标值，是则返回对应下标，没有则4.</li>
<li index="3" node="[object Object]" class="sm:text-xl text-lg my-2"><code class="bg-green-100" node="[object Object]">I</code> 不变，<code class="bg-green-100" node="[object Object]">J</code>加1，继续循环。</li>
</ol>
<p node="[object Object]" class="sm:text-xl text-lg my-4">以上，就是类型体操做 <code class="bg-green-100" node="[object Object]">Two Sum</code> 的全部逻辑，写几个简单的 case 测试一下：</p>
<pre><div node="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:FiraCode Nerd Font; monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;font-size:1rem"><code class="language-typescript" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">1</span><span class="token maybe-class-name">Expect</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token maybe-class-name">Equal</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token maybe-class-name">TwoSum</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#bd93f9">2</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">7</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">11</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">5</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">9</span><span class="token" style="color:#f8f8f2">&gt;</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#bd93f9">0</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">1</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">&gt;&gt;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">2</span><span></span><span class="token maybe-class-name">Expect</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token maybe-class-name">Equal</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token maybe-class-name">TwoSum</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#bd93f9">3</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">2</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">4</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">6</span><span class="token" style="color:#f8f8f2">&gt;</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#bd93f9">1</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">2</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">&gt;&gt;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">3</span><span></span><span class="token maybe-class-name">Expect</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token maybe-class-name">Equal</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token maybe-class-name">TwoSum</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#bd93f9">3</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">3</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">6</span><span class="token" style="color:#f8f8f2">&gt;</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#bd93f9">0</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">1</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">&gt;&gt;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">4</span><span></span><span class="token maybe-class-name">Expect</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token maybe-class-name">Equal</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token maybe-class-name">TwoSum</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#bd93f9">2</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">7</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">11</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">5</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">10</span><span class="token" style="color:#f8f8f2">&gt;</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">&gt;&gt;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#6272a4">5</span><span></span><span class="token maybe-class-name">Expect</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token maybe-class-name">Equal</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token maybe-class-name">TwoSum</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#bd93f9">1</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">3</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">6</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">7</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">9</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">10</span><span class="token" style="color:#f8f8f2">&gt;</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#bd93f9">0</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#bd93f9">4</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">&gt;&gt;</span></code></div></pre>
<p node="[object Object]" class="sm:text-xl text-lg my-4">Work. :D</p></div><a class="float-right mt-10 sm:text-2xl text-xl text-gray-500 hover:text-black hover:underline hover:underline-offset-4 transition-all" href="/">cd ..</a><div class="bottom-0 mt-20"><p class="text-gray-800 text-sm sm:text-lg">Powered by <a href="https://github.com/qianxi0410/gossip" class="text-blue-500 hover:underline transition-all">Gossip</a></p></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":3,"title":"Two Sum ","created_at":"2022-04-19T06:56:16Z","updated_at":"2022-07-19T05:14:07Z","content":"### Two Sum\r\n\r\n如果你没听过这个题，那么你一定是一个不合格的程序员。 ~~断言丁真，鉴定为真~~\r\n\r\n作为 `L站` 的第一题，相信大部分人是听过/写过的，即便你第一遍没写出来 ~~我就没写出来~~，看了官方的解答之后也能够很快明白其原理。\r\n\r\n官方解答中的两种做法，一个是时间换空间，即开个双循环遍历，另外一种则是空间换时间，即开个map记录。\r\n\r\n这两种思路都比较 naive，但是如果要用 `TypeScript` 中的类型体操来完成测试又该如何呢？\r\n\r\n首先，开个map记录下标这种做法，我尝试过很久（指几十分钟），被我认定为不可行。 ~~也可能是我太菜了~~\r\n\r\n那么就决定是你了！循环遍历！\r\n\r\n首先，需要定义好需要完成的类型：\r\n\r\n```typescript\r\ntype TwoSum\u003cArr extends number[], target extends number\u003e = any;\r\n```\r\n\r\n和 `L站` 上的定义相仿，接受一个数组（元组）和一个目标值参数，并且返回一个元组。当然，在泛型当中，参数自然也是泛型参数。\r\n\r\n不借助 **外力** 的话，显然这个类型无法达到所需要的体操效果。你必须考虑的是，如何循环遍历这第一个参数呢？\r\n\r\n\u003e 需要注意的是，在ts中，循环是通过递归调用来实现的，因为类型是不可变的，自然需要比较函数式的做法，即递归。\r\n\r\n为了不破坏调用的方式，你可以定义一个辅助类型，但是我这里选择的是默认参数类型，即：\r\n\r\n```typescript\r\ntype TwoSum\u003c\r\n  Arr extends number[],\r\n  target extends number,\r\n  I extends number = 0,\r\n  J extends number = Add\u003cI, 1\u003e,\r\n  ArrLen extends number = Length\u003cArr\u003e,\r\n\u003e = any;\r\n```\r\n\r\n和常规的做法类似，双循环，自然是需要两个变量： `i, j`，还有一个变量是用来记录传入元组的长度，当然，它是可选的。\r\n\r\n注意到，`i,j`的初始值分别是0和 `Add\u003cI, 1\u003e` ，即0和1，这类似于 `for ` 循环中的双重循环的初始化方式。\r\n\r\n在进行下一步之前，需要将辅助类型 `Add` 和 `Length` 进行实现。\r\n\r\n首先是 `Length`，需要知道的是，数组/元组有一个叫做 `length` 的属性，上面直接记录了该数组/元组的长度，所以 `Length` 的实现直接返回该属性值即可：\r\n\r\n```typescript\r\ntype Length\u003cT extends unknown[]\u003e = T['length'];\r\n```\r\n\r\n其次是 `Add`，实现 `Add` 有很复杂的做法，但是这里只需要理解其思路，就实现一个比较 naive 的 `Add` 即可，思路是：造 `A、B` 两个长度的元组，并且返回两个元组合并后的长度，即 `A + B` 的值。\r\n\r\n```typescript\r\ntype Push\u003cT extends unknown[], Val\u003e = [...T, Val];\r\n\r\ntype NTuple\u003cN extends number, T extends unknown[] = []\u003e = T['length'] extends N\r\n  ? T\r\n  : NTuple\u003cN, Push\u003cT, unknown\u003e\u003e;\r\n\r\ntype Add\u003cA extends number, B extends number\u003e = Length\u003c\r\n  [...NTuple\u003cA\u003e, ...NTuple\u003cB\u003e]\r\n\u003e;\r\n```\r\n\r\n当然，在写的过程中，你还需要一个辅助类型，用来提取出 `number` 类型：\r\n\r\n```typescript\r\ntype Num\u003cT\u003e = Extract\u003cT, number\u003e;\r\n```\r\n\r\n上述的辅助工作做完之后，可以开始写真正的逻辑：\r\n\r\n```typescript\r\ntype TwoSum\u003c\r\n  Arr extends number[],\r\n  target extends number,\r\n  I extends number = 0,\r\n  J extends number = Num\u003cAdd\u003cI, 1\u003e\u003e,\r\n  ArrLen extends number = Length\u003cArr\u003e,\r\n\u003e = I extends ArrLen\r\n  ? []\r\n  : J extends ArrLen\r\n  ? TwoSum\u003cArr, target, Num\u003cAdd\u003cI, 1\u003e\u003e\u003e\r\n  : Add\u003cArr[I], Arr[J]\u003e extends target\r\n  ? [I, J]\r\n  : TwoSum\u003cArr, target, I, Num\u003cAdd\u003cJ, 1\u003e\u003e\u003e;\r\n```\r\n\r\n令人恶心的三元表达式，不过分析起来也不算复杂：\r\n\r\n1. 判断 `I` 是否已经到达末尾，是则返回空元组，没有则2.\r\n2. 判断 `J`是否到达末尾，是则开始 `I + 1`次外循环，没有则3.\r\n3. 既然 `I,J` 都合法，则判断 `Arr[I] + Arr[J]` 是否为目标值，是则返回对应下标，没有则4.\r\n4. `I` 不变，`J`加1，继续循环。\r\n\r\n\r\n\r\n以上，就是类型体操做 `Two Sum` 的全部逻辑，写几个简单的 case 测试一下：\r\n\r\n```typescript\r\nExpect\u003cEqual\u003cTwoSum\u003c[2, 7, 11, 5], 9\u003e, [0, 1]\u003e\u003e\r\nExpect\u003cEqual\u003cTwoSum\u003c[3, 2, 4], 6\u003e, [1, 2]\u003e\u003e\r\nExpect\u003cEqual\u003cTwoSum\u003c[3, 3], 6\u003e, [0, 1]\u003e\u003e\r\nExpect\u003cEqual\u003cTwoSum\u003c[2, 7, 11, 5], 10\u003e, []\u003e\u003e\r\nExpect\u003cEqual\u003cTwoSum\u003c[1, 3, 6, 7, 9], 10\u003e, [0, 4]\u003e\u003e\r\n```\r\n\r\nWork. :D","author":"qianxi0410"}},"__N_SSG":true},"page":"/post/[id]","query":{"id":"3"},"buildId":"vE0Ub5k0xjIICqzA76nxZ","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>